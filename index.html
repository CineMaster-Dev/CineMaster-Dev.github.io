<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CineMaster</title>
<link href="./files/style.css" rel="stylesheet">
<script type="text/javascript" src="./files/jquery.mlens-1.0.min.js"></script> 
<script type="text/javascript" src="./files/jquery.js"></script>
</head>


<body>
<div class="content">
  <div class="logo" style="text-align: center;">
    <a href="index.html">
      <img src="./assets/1_head.png" style="width: 400px; height: auto;"> <!-- 保持宽高比 -->
    </a>
  </div>

  <!-- 0. -->
  <h1><strong>A 3D-Aware and Controllable Framework for Cinematic Text-to-Video Generation</strong></h1>

  <!-- 1. -->
  <p>
    <center>
      <strong style="color: red;">TL;DR: <span style="color: black;">A 3D-aware and controllable text-to-video generation method allows users to manipulate objects and camera jointly in 3D space for high-quality cinematic video creation.</strong></span>

    </center>
  </p>
  <video width="100%" controls>
    <source src="./assets/2_project_page_anonymous.mp4" type="video/mp4">
  </video><br>

</div>


<!-- 2. -->
<div class="content">
  <h2 style="text-align:center;"><strong>Abstract</strong></h2>
  <p>
    In this work, we present CineMaster, a novel framework for 3D-aware and controllable text-to-video generation. 
    Our goal is to empower users with comparable controllability as professional film directors: precise placement of objects within the scene, 
    flexible manipulation of both objects and camera in 3D space, and intuitive layout control over the rendered frames. 
    To achieve this, CineMaster operates in two stages.
    In the first stage, we design an interactive workflow that allows users to intuitively construct 3D-aware conditional signals by positioning object bounding boxes and defining camera movements within the 3D space. 
    In the second stage, these control signals—comprising rendered depth maps, camera trajectories and object class labels—serve as the guidance for a text-to-video diffusion model, ensuring to generate the user-intended video content. 
    Furthermore, to overcome the scarcity of in-the-wild datasets with 3D box and camera pose annotations, we carefully establish an automated data annotation pipeline that extracts 3D bounding boxes and camera trajectories as control signals from large-scale video data. 
    Extensive qualitative and quantitative experiments demonstrate that CineMaster significantly outperforms existing methods and implements prominent 3D-aware text-to-video generation. 
  </p>
</div>





<!-- show demo and comparison-->
<!DOCTYPE html>
<html lang="zh-CN">
<head> 
    <meta charset="UTF-8">
    <title>视频切换示例</title>
    <style>
        .video-container {
            position: relative;
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
            overflow: hidden;
        }
        .video-container video {
            width: 100%;
            transition: opacity 0.5s ease-in-out;
        }
        .arrow {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            margin-top: -22px;
            padding: 16px;
            color: white;
            font-weight: bold;
            font-size: 24px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .arrow:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }
        .left-arrow {
            left: 0;
            border-radius: 3px 0 0 3px;
        }
        .right-arrow {
            right: 0;
            border-radius: 0 3px 3px 0;
        }
        .dots {
            text-align: center;
            padding: 10px;
        }
        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }
        .active, .dot:hover {
            background-color: #717171;
        }
    </style>
</head>
<body>
    <div class="content">

        <!--Object & Camera Motion Control Demos-->
        <h2 style="text-align:center;"><strong>Object & Camera Motion Control Demos</strong></h2>
        <table  width="1000" align="center" style="margin-top: 30px; table-layout: fixed;">
            <tbody>
              <!-- first row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group1_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_16_boy_fly_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group1_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_fly_boy.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A man flies to the moon.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group2_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_16_boy_fly_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group2_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_fly_boat.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A golden boat flies between clouds.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group3_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_16_boy_fly_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group3_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/1_fly_dolphin.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A dolphin flies to the sun.</div>
                  </div>
                </th>                
              </tr>

              <tr style="height: 10px;"></tr> 
              
              <!-- second row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group4_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_6_a_man_pass_a_car_spin_left_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group4_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_car_man.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A McLaren is parked on a road, a person walks in front of the camera.</div>
                  </div>
                </th>   
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group5_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_6_a_man_pass_a_car_spin_left_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group5_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_boat_man.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A man is walking towards the boat at the seaside.</div>
                  </div>
                </th>   
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group6_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_6_a_man_pass_a_car_spin_left_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group6_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/2_moon_man.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A man is walking on the clouds with a moon in the background.</div>
                  </div>
                </th>   
              </tr>

              <tr style="height: 10px;"></tr> 


              <!-- third row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group7_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_14_two_car_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group7_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_two_car.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">Two cars are driving on the road.</div>
                  </div>
                </th>

                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group8_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_4_ride_a_bicycle_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group8_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_ride_a_bicycle.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A panda is driving a motorcycle in a city.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group9_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_cat_jump_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group9_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s1_object_camera/3_cat_jump.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A cat jumps down from the table.</div>
                  </div>
                </th>
              </tr>              
            </tbody>
        </table>
        <br>

        <!--Object Motion Control Demos-->
        <h2 style="text-align:center;"><strong>Object Motion Control Demos</strong></h2>
        <table  width="1000" align="center" style="margin-top: 30px; table-layout: fixed;">
            <tbody>
              <!-- first row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group10_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_1_building_balloon_circle_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group10_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_green_fire_rotate_people.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A green magic orb revolves around the wizard.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group11_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_1_building_balloon_circle_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group11_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_tower.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">The hot air balloon is circling above a tower.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group12_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_1_building_balloon_circle_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group12_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/1_bird_rotate_people.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A bird circles around a man.</div>
                  </div>
                </th>
              </tr>

              <tr style="height: 10px;"></tr> 

              <!-- second row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group13_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_two_dolphins_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group13_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_two_dolphins.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">Two whales swim towards each other.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group14_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_7_two_airplanes.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group14_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_fire_and_bear.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A fireball descends from the sky and strikes towards a bear.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group15_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_bus_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group15_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/2_bus.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A bus is traveling on a countryside winding road with lots of flowers along the side of the road.</div>
                  </div>
                </th>
              </tr>

              <tr style="height: 10px;"></tr> 


              <!-- third row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group16_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;""
                           >
                      <source src="./assets/s2_object/3_jump_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group16_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;""
                           >
                      <source src="./assets/s2_object/3_jump.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A crystal ball skips across the lake surface.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group17_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/3_new_ride_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group17_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s2_object/3_ride_tiger.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A person is riding a tiger in a forest.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group18_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;""
                           >
                      <source src="./assets/s2_object/3_rabbit_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group18_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;""
                           >
                      <source src="./assets/s2_object/3_rabbit.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">The tortoise crawls while the hare hops and bounces.</div>
                  </div>
                </th>      
              </tr>              
            </tbody>
        </table>
        <br>


        <!--Camera Motion Control Demos-->
        <h2 style="text-align:center;"><strong>Camera Motion Control Demos</strong></h2>
        <table  width="1000" align="center" style="margin-top: 30px; table-layout: fixed;">
            <tbody>
              <!-- first row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group19_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_13_move_camera_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group19_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_tiger.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A tiger is lying on a block of ice.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group20_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_13_move_camera_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group20_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_cat.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A ginger cat lounges on a rock with a sea in the background.</div>
                  </div>
                </th>
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group21_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_13_move_camera_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group21_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/1_rabbit.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A rabbit sits on a table with a temple in the background.</div>
                  </div>
                </th>
              </tr>

              <tr style="height: 10px;"></tr> 


              <!-- second row -->
              <tr style="vertical-align: top;">
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group22_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group22_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_girl.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A woman stands by the seaside, admiring the beautiful sunset glow.</div>
                  </div>
                </th>                
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group23_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_9_man_bottle_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group23_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_man_bottle.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A man is holding a bottle of wine.</div>
                  </div>
                </th>      
                <th>
                  <div class="item has-text-centered">
                    <video poster="" id="group24_v1" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_box.mp4" type="video/mp4">
                    </video>
                    <video poster="" id="group24_v2" preload="metadata" autoplay controls muted playsinline 
                           style="width: 100%; height: 100%;">
                      <source src="./assets/s3_camera/2_lighthouse.mp4" type="video/mp4">
                    </video>                    
                    <div class="caption">A lighthouse stands on a calm sea with the colorful aurora in the background.</div>
                  </div>
                </th>      
              </tr>           
            </tbody>
        </table>
        <br>


        <!-- 1.-->
        <h2 style="text-align:center;"><strong>Qualitative Comparison</strong></h2>
        <!-- 2.-->
        <div class="video-container" data-videos='["./assets/comparison_video1.mp4", "./assets/comparison_video2.mp4", "./assets/comparison_video3.mp4"]'>
            <video width="100%" controls>
                <source src="./assets/comparison_video1.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <a class="arrow left-arrow" onclick="switchVideo(this, 'prev')">&#10094;</a>
            <a class="arrow right-arrow" onclick="switchVideo(this, 'next')">&#10095;</a>
            <!-- 3.-->
            <div class="dots">
                <span class="dot" onclick="currentVideo(this, 0)"></span>
                <span class="dot" onclick="currentVideo(this, 1)"></span>
                <span class="dot" onclick="currentVideo(this, 2)"></span>
            </div>
        <!-- 4.-->
        <p>
            We compare CineMaster with existing SOTA methods for three different feature comparisons: 
            moving object & static camera, static object & moving camera and moving object & moving camera.
            In comparison, CineMaster could better control object motion and camera motion separately or jointly to generate diverse user-intended scenes.
        </p>
        </div>

    </div>

    <script>

        document.addEventListener('DOMContentLoaded', function() {
          const videoGroups = {};
          
          
          document.querySelectorAll('video').forEach(video => {
              const groupMatch = video.id.match(/group(\d+)_v\d+/);
              if (groupMatch) {
                  const groupName = groupMatch[1];
                  if (!videoGroups[groupName]) {
                      videoGroups[groupName] = [];
                  }
                  videoGroups[groupName].push(video);
              }
          });
      
          const videoObserver = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                  const video = entry.target;
                  if (entry.isIntersecting) {
                      video.play().catch(e => console.error('Play error:', e));
                  } else {
                      video.pause();
                  }
              });
          }, {
              threshold: 0.1 
          });
      
          Object.values(videoGroups).forEach(videos => {
              if (videos.length < 2) return; 
              
              const endedStates = new Array(videos.length).fill(false);
              let replayTimeout = null;
              
              videos.forEach((video, index) => {
                  videoObserver.observe(video);
      
                  video.muted = true;
                  video.playsInline = true;
                  
                  video.addEventListener('play', () => {
                      videos.forEach(v => {
                          if (v !== video) v.play().catch(e => console.error('Play error:', e));
                      });
                  });
      
                  video.addEventListener('pause', () => {
                      if (!video.ended) {
                          videos.forEach(v => {
                              if (v !== video) v.pause();
                          });
                      }
                  });
      
                  video.addEventListener('ended', () => {
                      endedStates[index] = true;
      
                      if (endedStates.every(state => state)) {
                          if (replayTimeout) {
                              clearTimeout(replayTimeout);
                          }
                          
                          replayTimeout = setTimeout(() => {
                              videos.forEach(v => {
                                  v.currentTime = 0;
                              });
                              
                              endedStates.fill(false);
                              
                              if (isElementInViewport(videos[0])) {
                                  videos.forEach(v => {
                                      v.play().catch(e => console.error('Replay error:', e));
                                  });
                              }
                          }, 500);
                      }
                  });
      
                  video.addEventListener('loadeddata', () => {
                      console.log(`${video.id} loaded successfully`);
                      if (isElementInViewport(video)) {
                          video.play().catch(e => console.error('Initial play error:', e));
                      }
                  });
      
                  video.addEventListener('error', (e) => {
                      console.error(`Error in video ${video.id}:`, e);
                  });
              });
          });
        });
    
        function isElementInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

        function switchVideo(element, direction) {
            const container = element.closest('.video-container');
            const videoPlayer = container.querySelector('video');
            const videoSource = videoPlayer.querySelector('source');
            const videos = JSON.parse(container.getAttribute('data-videos'));
            let currentVideoIndex = videos.findIndex(video => video.includes(videoSource.src.split('/').pop()));

            videoPlayer.style.opacity = 0; // Start fade out
            setTimeout(() => {
                if (direction === 'next') {
                    currentVideoIndex = (currentVideoIndex + 1) % videos.length;
                } else if (direction === 'prev') {
                    currentVideoIndex = (currentVideoIndex - 1 + videos.length) % videos.length;
                }
                videoSource.src = videos[currentVideoIndex];
                videoPlayer.load();
                videoPlayer.play();
                videoPlayer.style.opacity = 1; // Fade in
                updateDots(container, currentVideoIndex);
            }, 500); // Match the transition duration
        }

        function currentVideo(element, index) {
            const container = element.closest('.video-container');
            const videoPlayer = container.querySelector('video');
            const videoSource = videoPlayer.querySelector('source');
            const videos = JSON.parse(container.getAttribute('data-videos'));

            videoPlayer.style.opacity = 0; // Start fade out
            setTimeout(() => {
                videoSource.src = videos[index];
                videoPlayer.load();
                videoPlayer.play();
                videoPlayer.style.opacity = 1; // Fade in
                updateDots(container, index);
            }, 500); // Match the transition duration
        }

        function updateDots(container, activeIndex) {
            const dots = container.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                dot.className = dot.className.replace(' active', '');
                if (index === activeIndex) {
                    dot.className += ' active';
                }
            });
        }

        // Initialize the first dot as active for each video container
        document.querySelectorAll('.video-container').forEach(container => {
            updateDots(container, 0);
        });
    </script> 
</body>
</html>




<!-- 4. -->
<div class="content">
  <h2 style="text-align:center;"><strong>How Does it Work?</strong></h2>
  <!-- <h2 style="text-align:center;"><strong>CineMaster Framework</strong></h2> -->
  <img class="summary-img" src="./assets/overview_cinemaster.png" style="width:80%;">
  <p>
    We present <b>CineMaster</b>, a framework that enables users to manipulate objects and camera in the 3D space for text-to-video generation. 
    CineMaster consists of two stages. 
    First, we present an interactive workflow that allows users to intuitively manipulate the objects and camera in a 3D-native manner. 
    Then the control signals are rendered from the 3D engine and fed into a text-to-video diffusion model, 
    guiding the generation of user-intended video content.
  </p>
  

  <h2 style="text-align:center;"><strong>Model Design</strong></h2>
  <img class="summary-img" src="./assets/network.png" style="width:100%;">
  <p>
    Overview of the network architecture. We design a Semantic Layout ControlNet which consists of a semantic injector and a DiT-based ControlNet. 
    Semantic injector fuses the 3D spatial layout and class label conditions. 
    The DiT-based ControlNet further represents the fused features and adds to the hidden states of the base model. 
    Meanwhile, we inject the camera trajectories by the camera adapter to achieve joint control over object motion and camera motion.
  </p>

  <h2 style="text-align:center;"><strong>Dataset Labeling Pipeline</strong></h2>
  <img class="summary-img" src="./assets/data_pipeline.png" style="width:100%;">
  <p>
    Dataset Labeling Pipeline. We propose a data labeling pipeline to extract 3D bounding boxes, class labels and camera poses from videos. 
    Our pipeline consists of four steps: 1) Instance Segmentation: Obtain instance segmentation results from the foreground in videos. 
    2) Depth Estimation: Produce metric depth maps using DepthAnything V2. 
    3) 3D Point Cloud and Box Calculation: Identify the frame with the largest mask for each entity and compute the 3D point cloud of each entity through inverse projection. 
    Then, use the minimum volume method to calculate the 3D bounding box for each entity. 
    4) Entity Tracking and 3D Box Adjustment: Access the point tracking results of each entity and calculate the 3D bounding boxes for each frame. 
    Finally, project the entire 3D scene into depth maps.
  </p>
</div>




</div>
<div class="content" id="acknowledgements">
  <p>
    Our project page is borrowed from <a href="https://dreambooth.github.io/">DreamBooth</a>.
  </p>
</div>

</body>
</html>
